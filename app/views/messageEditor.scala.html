@import net.wa9nnn.rc210.data.message.Message
@import net.wa9nnn.rc210.data.vocabulary.Words
@import net.wa9nnn.rc210.ui.Tabs
@import views.html.helper.form

@import scala.util.Random
@(message: Message)(implicit messagesProvider: MessagesProvider)

@tabbedmain(Tabs.messagesTab) {
    <link rel="stylesheet" href="//code.jquery.com/ui/1.13.2/themes/base/jquery-ui.css">
    <link rel="stylesheet" href="@routes.Assets.versioned("stylesheets/dualList.css")">
    dualList.css
    <script src="@routes.Assets.versioned("javascripts/messageEditor.js")"></script>


    @form(action = routes.MessageController.save(), Symbol("id") -> "messageForm") {
        <input type="hidden" name="key" value="@message.key">
        <input type="hidden" name="words" id="words">
        <div class="row">
            <div class="col col-md-auto border border-primary">
                <p class="sectionHeader">@message.key</p>

                <div><label for="name">Name: </label>
                    @Html(message.key.namedHtml)
                </div>

                <input class="btn btn-primary" type="submit" value="Save">
                <p class="text-break help">Drag from Available Words to Current Words.<br/>
                    Drag within Current Words to re-arrange or remove.</p>
            </div>
            <div id="dropZone" class="col col-md-auto border border-primary">
                <p class="sectionHeader">Current Words</p>

                <table >
                    <tbody id="currentList">
                    @for(word <- message.words) {
                        <tr class="wordSource" data-word="@word">
                            <td class="text-nowrap">@Words(word).string</td>
                            <td><button type="button" class="btn btn-default btn-xs" onclick="remove()">
                                <i class="bi bi-trash3"></i>
                            </button>
                            </td>
                        </tr>
                    </tbody>
                    }
                </table>
            </div>
            <div class="col col-md-auto ">
                <p class="sectionHeader">Available Words</p>

                <div id="myDropdown" class="dropdown-content show wordList">
                    <input type="text" placeholder="Search.." id="myInput" onkeyup="filterFunction()">
                    <div>
                        <table>
                        @for(word <- Words.words) {
                            <tr class="wordSource" data-word="@word.id">
                                <td class="text-nowrap" title="Phrase: @word.id" >@word.string</td>
                            </tr>
                        }
                        </table>
                    </div>
                </div>
            </div>
        </div>
    }
}